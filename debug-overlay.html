<!doctype html>
<html>
  <head>
    <title>Overlay Strategy Debug</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
        background: #f5f5f5;
      }
      .debug-section {
        background: white;
        margin: 20px 0;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .debug-box {
        border: 1px solid #ccc;
        padding: 10px;
        margin: 10px 0;
        position: relative;
      }
      .hidden-element {
        visibility: hidden;
        position: absolute;
        top: 0;
        left: 0;
      }
      .skeleton {
        background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
        background-size: 200% 100%;
        animation: skeleton-loading 1.5s infinite;
        border-radius: 4px;
      }
      @keyframes skeleton-loading {
        0% {
          background-position: 200% 0;
        }
        100% {
          background-position: -200% 0;
        }
      }
      .button-xs {
        height: 24px;
        padding: 0 8px;
        font-size: 12px;
      }
      .button-sm {
        height: 32px;
        padding: 0 12px;
        font-size: 14px;
      }
      .button-md {
        height: 40px;
        padding: 0 16px;
        font-size: 16px;
      }
      .button-lg {
        height: 48px;
        padding: 0 20px;
        font-size: 18px;
      }
      .button-xl {
        height: 56px;
        padding: 0 24px;
        font-size: 20px;
      }
      .button {
        border: none;
        border-radius: 6px;
        background: #007acc;
        color: white;
        font-weight: 500;
        cursor: pointer;
        display: inline-block;
        text-align: center;
        min-width: 64px;
      }
    </style>
  </head>
  <body>
    <h1>Overlay Strategy Debug Test</h1>

    <div class="debug-section">
      <h2>Real Buttons (Reference)</h2>
      <div class="debug-box">
        <button class="button button-xs">XS Button</button>
        <button class="button button-sm">SM Button</button>
        <button class="button button-md">MD Button</button>
        <button class="button button-lg">LG Button</button>
        <button class="button button-xl">XL Button</button>
      </div>
    </div>

    <div class="debug-section">
      <h2>Overlay Strategy Simulation</h2>
      <div class="debug-box">
        <h3>XS Button Test</h3>
        <div style="position: relative; display: inline-block">
          <button class="button button-xs hidden-element">XS Button</button>
          <div
            class="skeleton"
            style="position: absolute; top: 0; left: 0; width: 100%; height: 100%"
          ></div>
        </div>
      </div>

      <div class="debug-box">
        <h3>SM Button Test</h3>
        <div style="position: relative; display: inline-block">
          <button class="button button-sm hidden-element">SM Button</button>
          <div
            class="skeleton"
            style="position: absolute; top: 0; left: 0; width: 100%; height: 100%"
          ></div>
        </div>
      </div>

      <div class="debug-box">
        <h3>MD Button Test</h3>
        <div style="position: relative; display: inline-block">
          <button class="button button-md hidden-element">MD Button</button>
          <div
            class="skeleton"
            style="position: absolute; top: 0; left: 0; width: 100%; height: 100%"
          ></div>
        </div>
      </div>
    </div>

    <div class="debug-section">
      <h2>Manual Measurement Test</h2>
      <div id="measurement-results"></div>
    </div>

    <script>
      // Test ResizeObserver behavior
      document.addEventListener('DOMContentLoaded', function () {
        const buttons = document.querySelectorAll('.button');
        const results = document.getElementById('measurement-results');

        buttons.forEach((button, index) => {
          const rect = button.getBoundingClientRect();
          const result = document.createElement('div');
          result.innerHTML = `
                    <p><strong>Button ${index}:</strong> ${rect.width.toFixed(1)}px × ${rect.height.toFixed(1)}px</p>
                `;
          results.appendChild(result);
        });

        // Test ResizeObserver
        if (window.ResizeObserver) {
          const observer = new ResizeObserver((entries) => {
            entries.forEach((entry) => {
              console.log(
                'ResizeObserver:',
                entry.target.className,
                'Size:',
                entry.contentRect.width,
                '×',
                entry.contentRect.height,
              );
            });
          });

          buttons.forEach((button) => observer.observe(button));
        }
      });
    </script>
  </body>
</html>
